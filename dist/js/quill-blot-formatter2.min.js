!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("Quill")):"function"==typeof define&&define.amd?define(["Quill"],e):"object"==typeof exports?exports.QuillBlotFormatter2=e(require("Quill")):t.QuillBlotFormatter2=e(t.Quill)}(self,(t=>(()=>{"use strict";var e={744:t=>{var e=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===n}(t)}(t)};var n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(t,e){return!1!==e.clone&&e.isMergeableObject(t)?a((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function r(t,e,n){return t.concat(e).map((function(t){return o(t,n)}))}function i(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return Object.propertyIsEnumerable.call(t,e)})):[]}(t))}function l(t,e){try{return e in t}catch(t){return!1}}function s(t,e,n){var r={};return n.isMergeableObject(t)&&i(t).forEach((function(e){r[e]=o(t[e],n)})),i(e).forEach((function(i){(function(t,e){return l(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,i)||(l(t,i)&&n.isMergeableObject(e[i])?r[i]=function(t,e){if(!e.customMerge)return a;var n=e.customMerge(t);return"function"==typeof n?n:a}(i,n)(t[i],e[i],n):r[i]=o(e[i],n))})),r}function a(t,n,i){(i=i||{}).arrayMerge=i.arrayMerge||r,i.isMergeableObject=i.isMergeableObject||e,i.cloneUnlessOtherwiseSpecified=o;var l=Array.isArray(n);return l===Array.isArray(t)?l?i.arrayMerge(t,n,i):s(t,n,i):o(n,i)}a.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return a(t,n,e)}),{})};var c=a;t.exports=c},797:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(1)),i=o(n(744)),l=o(n(402)),s=o(n(216)),a=(t,e)=>e;e.default=class{quill;options;currentSpec;specs;overlay;actions;constructor(t,e={}){this.quill=t,this.options=(0,i.default)(l.default,e,{arrayMerge:a}),this.currentSpec=null,this.actions=[],this.overlay=document.createElement("div"),this.overlay.classList.add(this.options.overlay.className),this.options.overlay.style&&Object.assign(this.overlay.style,this.options.overlay.style),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.quill.root.addEventListener("click",this.onClick),this.specs=this.options.specs.map((t=>new t(this))),this.specs.forEach((t=>t.init())),this.options.image.registerImageTitleBlot&&r.default.register(s.default,!0)}show(t){this.currentSpec=t,this.currentSpec.setSelection(),this.setUserSelect("none"),this.quill.root.parentNode.appendChild(this.overlay),this.repositionOverlay(),this.createActions(t),document.addEventListener("click",this.onDocumentClick)}hide(){this.currentSpec&&(this.currentSpec.onHide(),this.currentSpec=null,this.quill.root.parentNode.removeChild(this.overlay),document.removeEventListener("click",this.onDocumentClick),this.overlay.style.setProperty("display","none"),this.setUserSelect(""),this.destroyActions(),this.quill.emitter.emit(this.quill.constructor.events.TEXT_CHANGE,0,this.quill.getLength(),"api"))}update(){this.repositionOverlay(),this.actions.forEach((t=>t.onUpdate()))}createActions(t){this.actions=t.getActions().map((t=>(t.onCreate(),t)))}destroyActions(){this.actions.forEach((t=>t.onDestroy())),this.actions=[]}repositionOverlay(){if(!this.currentSpec)return;const t=this.currentSpec.getOverlayElement();if(!t)return;const e=this.quill.root.parentNode,n=t.getBoundingClientRect(),o=e.getBoundingClientRect();Object.assign(this.overlay.style,{display:"block",left:`${n.left-o.left-1+e.scrollLeft}px`,top:`${n.top-o.top+e.scrollTop}px`,width:`${n.width}px`,height:`${n.height}px`})}setUserSelect(t){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach((e=>{this.quill.root.style.setProperty(e,t),document.documentElement&&document.documentElement.style.setProperty(e,t)}))}onDocumentClick=t=>{const e=t.target;console.log(e),this.quill.root.parentNode.contains(e)||e.closest("div[data-blot-formatter-modal]")||e.classList.contains("blot-formatter__proxy-image")||this.hide()};onClick=()=>{this.hide()}}},402:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(329)),i=o(n(643)),l={specs:[r.default,i.default],overlay:{className:"blot-formatter__overlay",style:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},labels:{alt:"Alt Text",title:"Image Title"}},align:{attribute:"data-align",icons:{left:'\n        <svg viewbox="0 0 18 18">\n          <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line>\n          <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line>\n          <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line>\n        </svg>\n      ',center:'\n        <svg viewbox="0 0 18 18">\n          <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>\n          <line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line>\n          <line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line>\n        </svg>\n      ',right:'\n        <svg viewbox="0 0 18 18">\n          <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>\n          <line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line>\n          <line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line>\n        </svg>\n      ',attribute:'\n        <svg viewBox="0 0 24 24" fill="none" class="ql-stroke">\n          <path id="Vector" d="M10 19H12M12 19H14M12 19V5M12 5H6V6M12 5H18V6" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>\n      '},toolbar:{allowDeselect:!0,mainClassName:"blot-formatter__toolbar",mainStyle:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default",zIndex:"1"},buttonClassName:"blot-formatter__toolbar-button",addButtonSelectStyle:!0,buttonStyle:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle",cursor:"pointer"},svgStyle:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"}}},resize:{handleClassName:"blot-formatter__resize-handle",handleStyle:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"}},image:{registerImageTitleBlot:!1}};e.default=l},572:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});e.default=class{formatter;constructor(t){this.formatter=t}onCreate(){}onDestroy(){}onUpdate(){}}},926:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(1)),i=o(n(572)),l=n(87);class s extends i.default{icon;constructor(t){super(t),this.icon=this.formatter.options.align.icons.attribute}setAltTitle(t,e){const n=this.formatter.currentSpec?.getTargetElement();if(n){t&&n.setAttribute("alt",t),e&&n.setAttribute("title",e);const o=r.default.find(n),i=o?.parent?.formats()[l.ImageAlign.attrName]?.align;o&&i&&(o.parent?.format(l.ImageAlign.attrName,!1),o.format(l.ImageAlign.attrName,{align:i,title:e}))}}showAltTitleModal(t){const e=Array.from(crypto.getRandomValues(new Uint8Array(5)),(t=>String.fromCharCode(97+t%26))).join("");document.body.insertAdjacentHTML("beforeend",this.modalHTML(e));const n=document.getElementById(`${e}-modal`),o=document.getElementById(`${e}-cancel`),r=document.getElementById(`${e}-form`),i=this.formatter.currentSpec?.getTargetElement();if(n&&r){const t=r.elements,e=t.namedItem("alt"),l=t.namedItem("title");e.value=i?.getAttribute("alt")||"",l.value=i?.getAttribute("title")||"",r.addEventListener("submit",(t=>{t.preventDefault(),this.setAltTitle(e.value,l.value),n.remove()})),r.addEventListener("cancel",(()=>{n.remove()})),n.addEventListener("click",(t=>{t.target===n&&n.remove()})),o?.addEventListener("click",(()=>{n.remove()}))}}modalHTML(t){return`\n        <div id="${t}-modal" data-blot-formatter-modal\n            style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 9999">\n            <div style="background-color: #f2f2f2; padding: 10px; border-radius: 5px; position: relative; width: 90%; max-width: 500px;">\n                <form id="${t}-form" style="margin-block-end: 0;">\n                    <label style="color: black; display: block;" for="alt">\n                    <h6 style="color: black; margin: 0; padding-bottom: 5px !important;">${this.formatter.options.overlay.labels.alt}</h6>\n                    </label>\n                    <textarea style="background-color: white; display: block; resize: none; width: 100%; padding: 5px;" name="alt" rows="3"></textarea>\n                    <label style="display: block; margin-top: 10px;" for="title">\n                    <h6 style="color: black; margin: 0; padding-bottom: 5px !important;">${this.formatter.options.overlay.labels.title}</h6>\n                    </label>\n                    <textarea style="background-color: white; display: block; resize: none; width: 100%; padding: 5px;" name="title" rows="3"></textarea>\n                    <div style="text-align: right;">\n                        <button type="submit" style="margin-top: 5px; font-size: x-large; text-decoration: none; font-weight:bold; color: green; cursor: pointer; background: none; border: 0; padding: 0;">âœ“</button>\n                    </div>\n                </form>\n                <button id="${t}-cancel" type="cancel" style="position: absolute; top: -0.5em; right: -0.5em; padding: 0 2px 2px 2px; background: white; border: 1px solid gray; border-radius: 5px; color: red; cursor: pointer;">ðŸ—™</button>\n            </div>\n        </div>\n        `}}e.default=s},751:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(1)),i=o(n(572));class l extends i.default{onCreate(){document.addEventListener("keyup",this.onKeyUp,!0),this.formatter.quill.root.addEventListener("input",this.onKeyUp,!0)}onDestroy(){document.removeEventListener("keyup",this.onKeyUp),this.formatter.quill.root.removeEventListener("input",this.onKeyUp)}onKeyUp=t=>{const e=!!document.querySelector("div[data-blot-formatter-modal]");if(this.formatter.currentSpec&&!e&&("Delete"===t.code||"Backspace"===t.code)){const t=this.formatter.currentSpec.getTargetElement();if(t){const e=r.default.find(t);if(e){const t=this.formatter.quill.getIndex(e);this.formatter.quill.deleteText(t,1)}}this.formatter.hide()}}}e.default=l},108:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(572));class i extends r.default{topLeftHandle;topRightHandle;bottomRightHandle;bottomLeftHandle;dragHandle;dragStartX;preDragWidth;targetRatio;constructor(t){super(t),this.topLeftHandle=this.createHandle("top-left","nwse-resize"),this.topRightHandle=this.createHandle("top-right","nesw-resize"),this.bottomRightHandle=this.createHandle("bottom-right","nwse-resize"),this.bottomLeftHandle=this.createHandle("bottom-left","nesw-resize"),this.dragHandle=null,this.dragStartX=0,this.preDragWidth=0,this.targetRatio=0}onCreate(){this.formatter.overlay.appendChild(this.topLeftHandle),this.formatter.overlay.appendChild(this.topRightHandle),this.formatter.overlay.appendChild(this.bottomRightHandle),this.formatter.overlay.appendChild(this.bottomLeftHandle);const t=this.formatter.options.resize.handleStyle||{};this.repositionHandles(t)}onDestroy(){this.setCursor(""),this.formatter.overlay.removeChild(this.topLeftHandle),this.formatter.overlay.removeChild(this.topRightHandle),this.formatter.overlay.removeChild(this.bottomRightHandle),this.formatter.overlay.removeChild(this.bottomLeftHandle),this.formatter.update()}createHandle(t,e){const n=document.createElement("div");return n.classList.add(this.formatter.options.resize.handleClassName),n.setAttribute("data-position",t),n.style.cursor=e,this.formatter.options.resize.handleStyle&&Object.assign(n.style,this.formatter.options.resize.handleStyle),n.addEventListener("mousedown",this.onMouseDown),n}repositionHandles(t){let e="0px",n="0px";t&&(t.width&&(e=-parseFloat(t.width)/2+"px"),t.height&&(n=-parseFloat(t.height)/2+"px")),Object.assign(this.topLeftHandle.style,{left:e,top:n}),Object.assign(this.topRightHandle.style,{right:e,top:n}),Object.assign(this.bottomRightHandle.style,{right:e,bottom:n}),Object.assign(this.bottomLeftHandle.style,{left:e,bottom:n})}setCursor(t){if(document.body&&(document.body.style.cursor=t),this.formatter.currentSpec){const e=this.formatter.currentSpec.getOverlayElement();e&&(e.style.cursor=t)}}onMouseDown=t=>{if(!(t.target instanceof HTMLElement))return;if(this.dragHandle=t.target,this.setCursor(this.dragHandle.style.cursor),!this.formatter.currentSpec)return;const e=this.formatter.currentSpec.getTargetElement();if(!e)return;const n=e.getBoundingClientRect();this.dragStartX=t.clientX,this.preDragWidth=n.width,this.targetRatio=n.height/n.width,document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.onMouseUp)};onDrag=t=>{if(!this.formatter.currentSpec)return;const e=this.formatter.currentSpec.getTargetElement();if(!e)return;const n=t.clientX-this.dragStartX;let o=0;o=this.dragHandle===this.topLeftHandle||this.dragHandle===this.bottomLeftHandle?Math.round(this.preDragWidth-n):Math.round(this.preDragWidth+n);const r=this.targetRatio*o;e.setAttribute("width",`${o}`),e.setAttribute("height",`${r}`),this.formatter.update()};onMouseUp=()=>{this.setCursor(""),document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.onMouseUp)}}e.default=i},737:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(572)),i=o(n(185)),l=o(n(320));class s extends r.default{toolbar;aligner;constructor(t){super(t),this.aligner=new i.default(t.options.align),this.toolbar=new l.default}onCreate(){const t=this.toolbar.create(this.formatter,this.aligner);this.formatter.overlay.appendChild(t)}onDestroy(){const t=this.toolbar.getElement();t&&(this.formatter.overlay.removeChild(t),this.toolbar.destroy())}}e.default=s},87:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ImageAlign=e.IframeAlign=e.InlineBlot=void 0;const r=o(n(1));e.InlineBlot=r.default.import("blots/inline");r.default.import("delta");const i=r.default.import("parchment"),{ClassAttributor:l,Scope:s}=i,a=new l("iframeAlign","ql-iframe-align",{scope:s.BLOCK,whitelist:["left","center","right"]});e.IframeAlign=a;const c=new class extends l{constructor(){super("imageAlign","ql-image-align",{scope:s.INLINE,whitelist:["left","center","right"]})}add(t,e){return"object"==typeof e?(super.add(t,e.align),t.setAttribute("data-title",e.title),!0):super.add(t,e)}value(t){return{align:super.value(t),title:t.getAttribute("data-title")||""}}};e.ImageAlign=c,r.default.register({"formats/imageAlign":c,"attributors/class/imageAlign":c,"formats/iframeAlign":a,"attributors/class/iframeAlign":a},!0)},185:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(1)),i=n(87),l=r.default.import("parchment"),{Scope:s}=l,a="left",c="center",u="right";e.default=class{alignments;constructor(t){this.alignments={[a]:{name:a,icon:t.icons.left,apply:t=>{this.setAlignment(t,a)}},[c]:{name:c,icon:t.icons.center,apply:t=>{this.setAlignment(t,c)}},[u]:{name:u,icon:t.icons.right,apply:t=>{this.setAlignment(t,u)}}}}getAlignments(){return Object.keys(this.alignments).map((t=>this.alignments[t]))}clear(t){null!=t&&("IMG"===t.domNode.tagName?null!==t.parent&&"SPAN"===t.parent.domNode.tagName&&t.parent.format(i.ImageAlign.attrName,!1):"IFRAME"===t.domNode.tagName&&t.format(i.IframeAlign.attrName,!1))}isInlineBlot(t){return(t.statics?.scope&s.INLINE)===s.INLINE_BLOT}isBlockBlot(t){return(t.statics?.scope&s.BLOCK)===s.BLOCK_BLOT}hasInlineScope(t){return(t.statics.scope&s.INLINE)===s.INLINE}hasBlockScope(t){return(t.statics.scope&s.BLOCK)===s.BLOCK}isAligned(t,e){if(null!=t){if(this.isInlineBlot(t)||this.hasInlineScope(t)){const n=t.parent?.formats()[i.ImageAlign.attrName]?.align;return n===e.name}if(this.isBlockBlot(t)||this.hasBlockScope(t))return t.domNode.classList.contains(`${i.IframeAlign.keyName}-${e.name}`)}return!1}setAlignment(t,e){if(null!=t){const n=this.isAligned(t,this.alignments[e]);this.clear(t),n||(this.isInlineBlot(t)||this.hasInlineScope(t)?t.format(i.ImageAlign.attrName,{align:this.alignments[e].name,title:t.domNode.getAttribute("title")||""}):(this.isBlockBlot(t)||this.hasBlockScope(t))&&t.format(i.IframeAlign.attrName,this.alignments[e].name))}}}},320:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(1)),i=o(n(926));e.default=class{toolbar;buttons;constructor(){this.toolbar=null,this.buttons=[]}create(t,e){const n=document.createElement("div");return n.classList.add(t.options.align.toolbar.mainClassName),this.addToolbarStyle(t,n),this.addButtons(t,n,e),this.toolbar=n,this.toolbar}destroy(){this.toolbar=null,this.buttons=[]}getElement(){return this.toolbar}addToolbarStyle(t,e){t.options.align.toolbar.mainStyle&&Object.assign(e.style,t.options.align.toolbar.mainStyle)}addButtonStyle(t,e,n){if(n.options.align.toolbar.buttonStyle&&(Object.assign(t.style,n.options.align.toolbar.buttonStyle),e>0&&(t.style.borderLeftWidth="0")),n.options.align.toolbar.svgStyle){const e=t.children[0];e&&Object.assign(e.style,n.options.align.toolbar.svgStyle)}}addButtons(t,e,n){let o=0;n.getAlignments().forEach(((r,i)=>{const l=document.createElement("span");l.classList.add(t.options.align.toolbar.buttonClassName),l.innerHTML=r.icon,l.addEventListener("click",(()=>{this.onButtonClick(l,t,r,n)})),this.preselectButton(l,r,t,n),this.addButtonStyle(l,i,t),this.buttons.push(l),e.appendChild(l),o=i}));const r=t.currentSpec?.getTargetElement();if("IMG"===r?.tagName){const n=new i.default(t),r=document.createElement("span");r.classList.add(t.options.align.toolbar.buttonClassName),r.innerHTML=n.icon,r.addEventListener("click",(t=>{n.showAltTitleModal(t)})),this.addButtonStyle(r,++o,t),this.buttons.push(r),e.appendChild(r)}}preselectButton(t,e,n,o){if(!n.currentSpec)return;const i=n.currentSpec.getTargetElement();if(!i)return;const l=r.default.find(i);o.isAligned(l,e)&&this.selectButton(n,t)}onButtonClick(t,e,n,o){if(!e.currentSpec)return;const r=e.currentSpec.getTargetElement();r&&this.clickButton(t,r,e,n,o)}clickButton(t,e,n,o,i){this.buttons.forEach((t=>{this.deselectButton(n,t)}));const l=r.default.find(e);i.isAligned(l,o)?n.options.align.toolbar.allowDeselect?i.clear(l):this.selectButton(n,t):(this.selectButton(n,t),o.apply(l)),n.update()}selectButton(t,e){e.classList.add("is-selected"),t.options.align.toolbar.addButtonSelectStyle&&e.style.setProperty("filter","invert(20%)")}deselectButton(t,e){e.classList.remove("is-selected"),t.options.align.toolbar.addButtonSelectStyle&&e.style.removeProperty("filter")}}},216:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(1)).default.import("formats/image"),i=["alt","height","width","title"];e.default=class extends r{static formats(t){return i.reduce(((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e)),{})}format(t,e){i.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}}},156:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.IframeVideoSpec=e.UnclickableBlotSpec=e.ImageSpec=e.BlotSpec=e.ResizeAction=e.DeleteAction=e.DefaultToolbar=e.DefaultAligner=e.AlignAction=e.Action=e.default=e.DefaultOptions=void 0;var r=n(402);Object.defineProperty(e,"DefaultOptions",{enumerable:!0,get:function(){return o(r).default}});var i=n(797);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return o(i).default}});var l=n(572);Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return o(l).default}});var s=n(737);Object.defineProperty(e,"AlignAction",{enumerable:!0,get:function(){return o(s).default}});var a=n(185);Object.defineProperty(e,"DefaultAligner",{enumerable:!0,get:function(){return o(a).default}});var c=n(320);Object.defineProperty(e,"DefaultToolbar",{enumerable:!0,get:function(){return o(c).default}});var u=n(751);Object.defineProperty(e,"DeleteAction",{enumerable:!0,get:function(){return o(u).default}});var d=n(108);Object.defineProperty(e,"ResizeAction",{enumerable:!0,get:function(){return o(d).default}});var h=n(601);Object.defineProperty(e,"BlotSpec",{enumerable:!0,get:function(){return o(h).default}});var m=n(329);Object.defineProperty(e,"ImageSpec",{enumerable:!0,get:function(){return o(m).default}});var f=n(260);Object.defineProperty(e,"UnclickableBlotSpec",{enumerable:!0,get:function(){return o(f).default}});var p=n(643);Object.defineProperty(e,"IframeVideoSpec",{enumerable:!0,get:function(){return o(p).default}})},601:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(737)),i=o(n(108)),l=o(n(751));e.default=class{formatter;constructor(t){this.formatter=t}init(){}getActions(){return[new r.default(this.formatter),new i.default(this.formatter),new l.default(this.formatter)]}getTargetElement(){return null}getOverlayElement(){return this.getTargetElement()}setSelection(){this.formatter.quill.setSelection(null)}onHide(){}}},643:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(260));class i extends r.default{constructor(t){super(t,"iframe.ql-video")}}e.default=i},329:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(601));class i extends r.default{img;constructor(t){super(t),this.img=null}init(){this.formatter.quill.root.addEventListener("click",this.onClick)}getTargetElement(){return this.img}onHide(){this.img=null}onClick=t=>{const e=t.target;e instanceof HTMLElement&&"IMG"===e.tagName&&(this.img=e,this.formatter.show(this))}}e.default=i},260:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(601)),i="data-blot-formatter-unclickable-bound";class l extends r.default{selector;unclickable;nextUnclickable;proxyImage;constructor(t,e){super(t),this.selector=e,this.unclickable=null,this.nextUnclickable=null}init(){document.body&&document.body.appendChild(this.createProxyImage()),this.hideProxyImage(),this.proxyImage.addEventListener("click",this.onProxyImageClick),this.formatter.quill.on("text-change",this.onTextChange)}getTargetElement(){return this.unclickable}getOverlayElement(){return this.unclickable}onHide(){this.hideProxyImage(),this.nextUnclickable=null,this.unclickable=null}createProxyImage(){const t=document.createElement("canvas"),e=t.getContext("2d");return e&&(e.globalAlpha=0,e.fillRect(0,0,1,1)),this.proxyImage=document.createElement("img"),this.proxyImage.src=t.toDataURL("image/png"),this.proxyImage.classList.add("blot-formatter__proxy-image"),Object.assign(this.proxyImage.style,{position:"absolute",margin:"0"}),this.proxyImage}hideProxyImage(){Object.assign(this.proxyImage.style,{display:"none"})}repositionProxyImage(t){const e=t.getBoundingClientRect();Object.assign(this.proxyImage.style,{display:"block",left:`${e.left+window.pageXOffset}px`,top:`${e.top+window.pageYOffset}px`,width:`${e.width}px`,height:`${e.height}px`})}onTextChange=()=>{Array.from(document.querySelectorAll(this.selector)).filter((t=>!t.hasAttribute(i))).forEach((t=>{t.setAttribute(i,"true"),t.addEventListener("mouseenter",this.onMouseEnter)}))};onMouseEnter=t=>{const e=t.target;e instanceof HTMLElement&&(this.nextUnclickable=e,this.repositionProxyImage(this.nextUnclickable))};onProxyImageClick=()=>{this.unclickable=this.nextUnclickable,this.nextUnclickable=null,this.formatter.show(this),this.hideProxyImage()}}e.default=l},1:e=>{e.exports=t}},n={};var o=function t(o){var r=n[o];if(void 0!==r)return r.exports;var i=n[o]={exports:{}};return e[o].call(i.exports,i,i.exports,t),i.exports}(156);return o})()));